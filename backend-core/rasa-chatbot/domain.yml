version: "3.1"

# ============================================================
# INTENTS
# ============================================================
intents:
  # Stock Intents (16)
  - stock_price
  - stock_chart
  - stock_snapshot
  - stock_stat
  - company_profile
  - financials
  - revenue_trend
  - dividends
  - compare_stocks
  - top_gainers
  - top_losers
  - sector_stocks
  - dividend_leaders
  - screener_pe
  - ownership
  - fair_value
  - technical_indicators
  - financial_health
  - market_summary
  
  # Fund Intents (6) - NEW
  - fund_nav
  - fund_profile
  - fund_performance
  - fund_compare
  - fund_search
  - fund_movers
  
  # System Intents
  - help
  - switch_market
  - greet
  - goodbye
  - nlu_fallback

# ============================================================
# ENTITIES
# ============================================================
entities:
  # Stock entities
  - stock_symbol
  - stock_name
  - market_code
  - metric
  - range
  - statement_type
  - sector
  - threshold
  - operator
  
  # Fund entities - NEW
  - fund_id
  - fund_name
  - fund_category
  - fund_manager
  - shariah_filter

# ============================================================
# SLOTS
# ============================================================
slots:
  stock_symbol:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: stock_symbol
      - type: from_entity
        entity: stock_name
        
  fund_id:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: fund_id
      - type: from_entity
        entity: fund_name
        
  market_code:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: market_code
        
  range:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: range
        
  sector:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: sector
        
  metric:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: metric
        
  statement_type:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: statement_type
        
  fund_category:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: fund_category
        
  shariah_filter:
    type: bool
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: shariah_filter
        
  # Context slots (set by actions)
  last_symbol:
    type: text
    influence_conversation: true
    mappings:
      - type: custom
      
  last_fund_id:
    type: text
    influence_conversation: true
    mappings:
      - type: custom
      
  last_intent:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
      
  language:
    type: categorical
    values:
      - ar
      - en
    mappings:
      - type: custom

# ============================================================
# RESPONSES
# ============================================================
responses:
  utter_greet:
    - text: "Hello! I'm Starta, your financial assistant. How can I help you today?"
    - text: "Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø³ØªØ§Ø±ØªØ§ØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ù…Ø§Ù„ÙŠ. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ"
    
  utter_goodbye:
    - text: "Goodbye! Happy investing!"
    - text: "ÙˆØ¯Ø§Ø¹Ø§Ù‹! Ø§Ø³ØªØ«Ù…Ø§Ø± Ù…ÙˆÙÙ‚!"
    
  utter_ask_stock_symbol:
    - text: "Which stock are you interested in? Please provide a symbol (e.g., COMI) or company name."
    - text: "Ø£ÙŠ Ø³Ù‡Ù… ØªØ±ÙŠØ¯ Ù…Ø¹Ø±ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù†Ù‡ØŸ ÙŠØ±Ø¬Ù‰ Ø°ÙƒØ± Ø§Ù„Ø±Ù…Ø² (Ù…Ø«Ù„ COMI) Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©."
    
  utter_ask_fund_id:
    - text: "Which fund are you looking for? Please provide the fund name or ID."
    - text: "Ø£ÙŠ ØµÙ†Ø¯ÙˆÙ‚ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡ØŸ ÙŠØ±Ø¬Ù‰ Ø°ÙƒØ± Ø§Ø³Ù… Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø£Ùˆ Ø±Ù‚Ù…Ù‡."
    
  utter_clarify_intent:
    - text: "I'm not sure what you're looking for. Would you like to see:\n1. ğŸ“Š Price\n2. ğŸ“ˆ Chart\n3. ğŸ“‹ Financials\n4. ğŸ’° Dividends\n5. ğŸ¦ Fund NAV"
    - text: "Ù„Ø³Øª Ù…ØªØ£ÙƒØ¯Ø§Ù‹ Ù…Ø§Ø°Ø§ ØªØ±ÙŠØ¯. Ù‡Ù„ ØªØ±ÙŠØ¯:\n1. ğŸ“Š Ø§Ù„Ø³Ø¹Ø±\n2. ğŸ“ˆ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ\n3. ğŸ“‹ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ©\n4. ğŸ’° Ø§Ù„ØªÙˆØ²ÙŠØ¹Ø§Øª\n5. ğŸ¦ ØµØ§ÙÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø£ØµÙˆÙ„"
    
  utter_default:
    - text: "I didn't quite understand that. Could you rephrase? Try asking about a specific stock or fund."
    - text: "Ù„Ù… Ø£ÙÙ‡Ù… Ø·Ù„Ø¨Ùƒ. Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¹Ø§Ø¯Ø© ØµÙŠØ§ØºØªÙ‡ØŸ Ø¬Ø±Ø¨ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø³Ù‡Ù… Ø£Ùˆ ØµÙ†Ø¯ÙˆÙ‚ Ù…Ø­Ø¯Ø¯."
    
  utter_help:
    - text: |
        I can help you with:
        
        **Stocks:**
        â€¢ Price: "What's the price of COMI?"
        â€¢ Chart: "Show COMI chart 1Y"
        â€¢ Financials: "COMI financials"
        â€¢ Compare: "Compare COMI vs SWDY"
        â€¢ Top Gainers/Losers
        
        **Funds:**
        â€¢ NAV: "Fund 2742 NAV"
        â€¢ Performance: "Fund performance 1Y"
        â€¢ Search: "Shariah compliant funds"
        
        Just type your question!
    - text: |
        ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ:
        
        **Ø§Ù„Ø£Ø³Ù‡Ù…:**
        â€¢ Ø§Ù„Ø³Ø¹Ø±: "Ø³Ø¹Ø± COMI"
        â€¢ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ: "Ø´Ø§Ø±Øª COMI Ø³Ù†Ø©"
        â€¢ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ©: "Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù„Ù€ COMI"
        â€¢ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©: "Ù‚Ø§Ø±Ù† Ø¨ÙŠÙ† COMI Ùˆ SWDY"
        â€¢ Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø±ØªÙØ§Ø¹Ø§Ù‹/Ø§Ù†Ø®ÙØ§Ø¶Ø§Ù‹
        
        **Ø§Ù„ØµÙ†Ø§Ø¯ÙŠÙ‚:**
        â€¢ ØµØ§ÙÙŠ Ù‚ÙŠÙ…Ø© Ø§Ù„Ø£ØµÙˆÙ„: "Ø³Ø¹Ø± ØµÙ†Ø¯ÙˆÙ‚ 2742"
        â€¢ Ø§Ù„Ø£Ø¯Ø§Ø¡: "Ø£Ø¯Ø§Ø¡ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø³Ù†Ø©"
        â€¢ Ø§Ù„Ø¨Ø­Ø«: "ØµÙ†Ø§Ø¯ÙŠÙ‚ Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ø´Ø±ÙŠØ¹Ø©"
        
        Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ!

# ============================================================
# ACTIONS
# ============================================================
actions:
  # Stock Actions
  - action_stock_price
  - action_stock_chart
  - action_stock_snapshot
  - action_stock_stat
  - action_financials
  - action_dividends
  - action_compare_stocks
  - action_top_gainers
  - action_top_losers
  - action_sector_stocks
  - action_dividend_leaders
  - action_screener_pe
  - action_ownership
  - action_fair_value
  - action_technical_indicators
  - action_financial_health
  - action_market_summary
  
  # Fund Actions - NEW
  - action_fund_nav
  - action_fund_profile
  - action_fund_performance
  - action_fund_compare
  - action_fund_search
  - action_fund_movers
  
  # System Actions
  - action_clarify_symbol
  - action_clarify_fund
  - action_default_fallback
  - action_set_language
  - action_log_analytics

# ============================================================
# FORMS
# ============================================================
forms:
  stock_form:
    required_slots:
      - stock_symbol
      
  fund_form:
    required_slots:
      - fund_id

# ============================================================
# SESSION CONFIG
# ============================================================
session_config:
  session_expiration_time: 60  # minutes
  carry_over_slots_to_new_session: true
